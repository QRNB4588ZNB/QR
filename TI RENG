
-- 玩家踢出系统 - 由脚本生成器创建
local Players = game:GetService("Players")

-- 配置数据
local CONFIG = {
    TARGET_PLAYERS = {{name = "qhcisd"}},
    KICK_MESSAGE = "你已被秋容作者踢出:\n请到QQ频道反馈你是在执行完后玩着玩着被踢出\n还是刚执行被踢出截图反馈有奖送永久卡",
    CHECK_INTERVAL = 3,
    ENABLED = true
}

-- 检测玩家是否在目标列表中 - 仅使用玩家名称
local function isPlayerTargeted(player)
    for _, target in ipairs(CONFIG.TARGET_PLAYERS) do
        if target.name and player.Name:lower():find(target.name:lower()) then
            return true
        end
    end
    return false
end

-- 踢出玩家
local function kickPlayer(player)
    pcall(function()
        if player and player.Kick then
            player:Kick(CONFIG.KICK_MESSAGE)
            print("已踢出玩家: " .. player.Name)
        end
    end)
end

-- 主检测循环
local function startMonitoring()
    if not CONFIG.ENABLED then return end
    
    print("踢出脚本已启动，监控目标: " .. #CONFIG.TARGET_PLAYERS)
    
    -- 立即检测当前所有玩家
    for _, player in ipairs(Players:GetPlayers()) do
        if isPlayerTargeted(player) then
            kickPlayer(player)
        end
    end
    
    -- 监听新玩家加入
    Players.PlayerAdded:Connect(function(player)
        wait(2)
        if isPlayerTargeted(player) then
            kickPlayer(player)
        end
    end)
    
    -- 定期检测
    while CONFIG.ENABLED do
        wait(CONFIG.CHECK_INTERVAL)
        for _, player in ipairs(Players:GetPlayers()) do
            if isPlayerTargeted(player) then
                kickPlayer(player)
            end
        end
    end
end

-- 停止踢出脚本
local function stopKickScript()
    CONFIG.ENABLED = false
    print("踢出脚本已停止")
end

-- 创建控制界面
local function createControlUI()
    local PlayerGui = Players.LocalPlayer:WaitForChild("PlayerGui")
    
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "KickScriptControl"
    screenGui.Parent = PlayerGui
    
    local controlFrame = Instance.new("Frame")
    controlFrame.Size = UDim2.new(0, 200, 0, 80)
    controlFrame.Position = UDim2.new(1, -210, 0, 100)
    controlFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
    controlFrame.BorderSizePixel = 0
    controlFrame.Parent = screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = controlFrame
    
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 25)
    title.Position = UDim2.new(0, 0, 0, 0)
    title.Text = "踢出脚本控制"
    title.TextColor3 = Color3.new(1, 1, 1)
    title.TextSize = 14
    title.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
    title.Parent = controlFrame
    
    local stopBtn = Instance.new("TextButton")
    stopBtn.Size = UDim2.new(1, -10, 0, 25)
    stopBtn.Position = UDim2.new(0, 5, 1, -30)
    stopBtn.Text = "停止踢出脚本"
    stopBtn.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
    stopBtn.TextColor3 = Color3.new(1, 1, 1)
    stopBtn.Parent = controlFrame
    
    stopBtn.MouseButton1Click:Connect(function()
        stopKickScript()
        screenGui:Destroy()
    end)
    
    return screenGui
end

-- 启动脚本
local function initializeScript()
    if Players.LocalPlayer then
        startMonitoring()
        wait(2)
        createControlUI()
    else
        Players.PlayerAdded:Connect(function(player)
            if player == Players.LocalPlayer then
                wait(2)
                startMonitoring()
                wait(2)
                createControlUI()
            end
        end)
    end
    
    print("踢出脚本已启动")
end

-- 全局停止函数
_G.StopKickScript = stopKickScript

-- 延迟启动以避免冲突
wait(1)
initializeScript()
